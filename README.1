.SH Table of Contents
* #mdp1
  * #features
  * #configuration
  * #defaults
  * #meta
    * #options
    * #partial
    * #generator
  * #middleware
  * #usage
  * #manual
    * #usage
    * #options
    * #bugs
  * #library
  * #hook
  * #license

.SH mdp(1)
Markdown partial processor.

npm i -g mdp

Designed to generate markdown documents from a series of partials. 

Read #partial to learn how to define partials or get a quick feel by checking the #configuration that created this document, see #usage for an abbreviated look at the command line options, the #manual section is the result of generating program help for mdp(1) as markdown it illustrates the result of running an executable with a specific environment configuration.

Use this program to:

* Concatenate multiple markdown documents into a single file.
* Generate a table of contents for markdown document(s).
* Include the output of a shell program, great for examples or program usage.
* Keep your readme in sync with your code and prevent redundant effort with code samples.
* Convert relative links to absolute links so your readme documents work when displayed on the http://npmjs.org website.
* Be pedantic in presentation, but lazy authoring. Ensure paragraphs are terminated with a period and start out title case.
* Convert markdown document(s) to plain text.
* Create arbitrary processing rules with custom middleware, see #middleware.

This program was built using the https://github.com/freeformsystems/cli-command module:

Command execution for command line interfaces, a component of the toolkit.

If you care for excellent documentation and write command line interfaces you should check it out.

.SS Features
* Synchronize your README with your code.
* Generate markdown, html and txt documents from partials.
* Flexible middlware design, see #middleware.

.SS Configuration
This document was generated with the following configuration (see https://github.com/freeformsystems/mdp/blob/master/package.json):

{
  "title": {
    "ref": "name",
    "format": "%s(1)"
  },
  "pedantic": true,
  "include": "doc/readme",
  "require": "lib",
  "gfm": true,
  "branch": "master",
  "links": "links.md",
  "toc": "Table of Contents",
  "order": false,
  "base": "https://github.com/freeformsystems/mdp",
  "partial": [
    {
      "ref": "description"
    },
    {
      "inc": [
        "introduction.md",
        "features.md"
      ]
    },
    "## Configuration",
    {
      "lit": "This document was generated with the following configuration (see [package.json](/package.json)):"
    },
    {
      "ref": "mdp",
      "stringify": true,
      "format": "```json\n%s\n```"
    },
    "## Defaults",
    {
      "req": "defaults.js",
      "type": "code",
      "language": "javascript"
    },
    {
      "inc": "meta.md"
    },
    "## Middleware",
    {
      "inc": "middleware.md"
    },
    "The `inspect` middleware is shown below:",
    {
      "req": "middleware/inspect.js",
      "type": "code",
      "language": "javascript"
    },
    "You can enable it by declaring it in the meta data (or by using `--inspect`):",
    {
      "obj": {
        "middleware": [
          "inspect"
        ]
      },
      "type": "code",
      "language": "json"
    },
    "## Usage",
    {
      "bin": "mdp --help",
      "type": "code"
    },
    "## Manual",
    {
      "env": {
        "cli_toolkit_help_style": "markdown",
        "cli_toolkit_help_markdown_title": true,
        "cli_toolkit_help_markdown_header": "###"
      },
      "bin": "mdp --help",
      "pedantic": false
    },
    {
      "inc": [
        "library.md"
      ]
    },
    "## Hook",
    "Using a git hook is a good idea to ensure your README is up to date, here is the hook from this repository:",
    {
      "inc": "../../.git/hooks/pre-commit",
      "type": "code",
      "language": "bash"
    },
    "You are more likely to have `mdp` in your path so you could use something like:",
    {
      "inc": "git-hook.sh",
      "type": "code",
      "language": "bash"
    },
    {
      "inc": [
        "license.md",
        "../../LICENSE"
      ]
    }
  ]
}

.SS Defaults
{
  "generator": "Generated by [mdp(1)](https://github.com/freeformsystems/mdp).",
  "title": null,
  "gfm": true,
  "period": ".",
  "pedantic": false,
  "include": null,
  "require": null,
  "branch": "master",
  "links": null,
  "toc": false,
  "order": false,
  "base": null,
  "hash": false,
  "partial": null
}

.SS Meta
Meta data describes processing options and how you want to collate the partials.

.SS Options
* generator: A boolean that disables inclusion of the generator text.
* title: A string that sets the document title or a partial definition.
* gfm: A boolean that indicates that http://github.com flavoured markdown is in use.
* period: The character used by the #pedantic-middleware.
* include: A directory that is the base path for #include-partial.
* require: A directory that is the base path for #require-partial.
* branch: A branch name to use when resolving links that begin with / for http://github.com, only applicable if gfm is set.
* links: The name of a links include file, resolved relative to include.
* toc: Enable the table of contents middleware with true or set to a string to include a title above the table of contents.
* order: A boolean that indicates the toc middleware should use ordered lists.
* base: Enable the absolute link middleware, specifies the base URL for absolute links.
* hash: A boolean that controls whether the absolute middleware operates on URLs that begin with #.
* partial: Array of partial definitions, see #partial.

.SS Partial
A partial may be one of:

* literal: A string literal.
* reference: A property reference.
* object: A json or javascript object reference.
* include: Include a file, normally a markdown document but not necessarily.
* binary: Execute a command and use stdout as the content.
* require: Require a .js module or a .json file.

All keys are available using a three character abbreviation, specifiying bin is equivalent to binary.

.SS Generator
By default mdp(1) will append a generator message to the end of the document, it is nice if you wish to leave it in to help spread the word, however you may disable this message by setting the generator property to false.

.SS Middleware
Middleware functions are executed asynchronously once for each token encountered in the markdown document.

The inspect middleware is shown below:

function inspect(meta) {
  return function(token, tokens, meta, next) {
    console.dir(token);
    next();
  }
}

You can enable it by declaring it in the meta data (or by using --inspect):

{
  "middleware": [
    "inspect"
  ]
}

.SS Usage
Markdown partial processor.

Designed for readme documents but may be used for any markdown document.

Usage: mdp [-fp] [--force] [--print] [-o=file] [-h=file] file ...

Options:
     --man            Use a man renderer, default output is README.1.
     --color          Control terminal color.
 -f, --force          Force file overwrite.
     --pandoc         Include pandoc meta data.
     --inspect        Enable inspect middleware.
 -m, --md             Print markdown to stdout.
     --text           Use a text renderer, default output is README.txt.
     --debug          Enable debugging.
 -t, --title=[title]  Document title.
 -o, --output=[file]  Output file, default is README.md.
 -h, --html=[file]    Write html to file.
 -v, --verbose        Print more information.
 -w, --middleware=[file ...]
                      Require custom middleware.
     --help           Display this help and exit.
     --version        Output version information and exit.

Report bugs to muji <noop@xpm.io>.

.SS Manual
Markdown partial processor.

Designed for readme documents but may be used for any markdown document.

.SS Usage
mdp [-fp] [--force] [--print] [-o=file] [-h=file] file ...

.SS Options
* --man: Use a man renderer, default output is README.1.
* --color: Control terminal color.
* -f, --force: Force file overwrite.
* --pandoc: Include pandoc meta data.
* --inspect: Enable inspect middleware.
* -m, --md: Print markdown to stdout.
* --text: Use a text renderer, default output is README.txt.
* --debug: Enable debugging.
* -t, --title=[title]: Document title.
* -o, --output=[file]: Output file, default is README.md.
* -h, --html=[file]: Write html to file.
* -v, --verbose: Print more information.
* -w, --middleware=[file ...]: Require custom middleware.
* --help: Display this help and exit.
* --version: Output version information and exit.

.SS Bugs
Report bugs to muji &#109;&#x61;&#105;&#108;&#x74;&#111;&#x3a;&#110;&#111;&#111;&#112;&#x40;&#120;&#x70;&#109;&#46;&#105;&#x6f;.

.SS Library
Whilst designed to be used as a command line interface, in order to support ordered lists when round tripping the https://github.com/chjj/marked tokens back to markdown it was necessary to extend the Parser and Renderer classes.

These are exposed via the MarkdownParser and MarkdownRenderer properties of the module.

.SS Hook
Using a git hook is a good idea to ensure your README is up to date, here is the hook from this repository:

#!/usr/bin/env bash
abspath=$(cd ${BASH_SOURCE[0]%/*} && echo $PWD);
abspath=$(dirname $(dirname ${abspath}));
${abspath}/bin/mdp --force --debug && git add README.md

You are more likely to have mdp in your path so you could use something like:

#/bin/sh
mdp --force && git add README.md

.SS License
Everything is http://en.wikipedia.org/wiki/MIT_License. Read the https://github.com/freeformsystems/mdp/blob/master/LICENSE if you feel inclined.

The MIT License (MIT).

Copyright (c) 2014 Freeform Systems.

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the &quot;Software&quot;), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
the Software, and to permit persons to whom the Software is furnished to do so,
subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

Generated by https://github.com/freeformsystems/mdp.

[github]: http://github.com
[node]: http://nodejs.org
[npm]: http://npmjs.org
[marked]: https://github.com/chjj/marked
[command]: https://github.com/freeformsystems/cli-command
[usage]: #usage
